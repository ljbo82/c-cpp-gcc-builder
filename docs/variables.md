# Variable Reference

The way in which your project is built is defined according to variable values.

When the build system is included at the end of your project's `Makefile`, it will inspect the value of defined variables (defined either in the makefiles, environment, or command-line), check the project tree, and will create targets that allows a user to build the project.

Some variables are expected to be defined exclusively by any or your project's makefiles, some of them are recommended to be defined via command line, and others are read-only (i.e. contains utility information generated by the build system and cannot be modified by the user/project). The build system will check the origin and the value of each known variable, and when a violation is detected it will generate an error.

!!! Note
    The build system automatically includes extra [makefiles](../#makefiles), which also expect/expose their own set of variables. Check the documentation of each of them for details about expected/exposed variables.

This document contain details about all variables known by the build system.

!!! note "Variable details"
    For each detailed variable, the following fields refer to:

    * **Description:** Contains descriptive information about the variable.

    * **Required:** Defines if a variable must be defined (and it must be non-empty) during build.

    * **Default value:** Contains the value which will be assumed if variable is optional and it is not defined.

    * **Origins:** Contains the list of allowed origins for variable definition.

    * **Restrictions:** Contains information about restrictions on which kind of values that can be stored in the variable.


!!! Warning
    The build system declare internal private variables and functions that are not intended to be used by projects. All of those private variables and functions, have their names prefixed with `cpb_` prefix. Please avoid using/defining variables or functions with names beginning with such prefix.

    The build system checks for attempts to define variables and functions with the same name of reserved ones. Any attempt to define such items will result in errors being raised by the build system.

--------------------------------------------------------------------------------

## Project definition

The following variables are related with the project.

### PROJ_NAME

* **Description:** Defines project name.
* **Required:** Yes.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** Value shall not contain whitespaces nor can be an empty string.

--------------------------------------------------------------------------------

### PROJ_NAME

* **Description:** Defines project name.
* **Required:** Yes.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** Value shall not contain whitespaces nor can be an empty string.

--------------------------------------------------------------------------------

### PROJ_TYPE

* **Description:** Defines the project type.
* **Required:** Yes.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** Accepted values are:
    * `app` (for an application executable);
    * `lib` (for a library. See  [`LIB_TYPE`](#lib_type));

--------------------------------------------------------------------------------

### PROJ_VERSION

* **Description:** Defines the project version.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** Value must be a valid semantic value (see [fn_semver](../functions.mk/#fn_semver)).

--------------------------------------------------------------------------------

## Source management

The following variables provide a way to inform the build system about source files.

### DIST_DIRS

* **Description:** Contains a list of entries defining extra directories, whose files will be copied into [`$(O_DIST_DIR)`](#o_dist_dir):
    * Each entry in this variable has the syntax `ORIGIN_DIR[:DEST_DIR]` (all files recursively contained in `ORIGIN_DIR` will be copied into <tt style="color:#E74C3C">$([O_DIST_DIR](#o_dist_dir))/DEST_DIR</tt>. Note that `DEST_DIR` component is optional for entries. Its default value is the same as `ORIGIN_DIR`).
    * The build system may append values to this variable.
* **Required:** No.
* **Default value:** If [`INCLUDE_DIRS`](#include_dirs) variable is not defined, <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/include</tt> directory exists, and [`PROJ_TYPE`](#proj_type) equals to `lib`, then the default value will be `include:include`. Otherwise, the variable is left undefined.
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). Due to this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### DIST_FILES

* **Description:** Contains a list of extra files which shall be individually copied into [`$(O_DIST_DIR)`](#o_dist_dir):
    * Each entry in this variable has the syntax `ORIGIN_FILE[:DEST_FILE]` (an `ORIGIN_FILE` will be copied into <tt style="color:#E74C3C">$([O_DIST_DIR](#o_dist_dir))/DEST_FILE</tt>. Note that `DEST_FILE` component is optional for entries. Its default value is <tt style="color:#E74C3C">$([notdir](https://www.gnu.org/software/make/manual/make.html#index-notdir) ORIGIN_FILE)</tt>).
    * If [`DIST_DIRS`](#dist_dirs) is set, then for all files contained in these directories, there will be an corresponding entry in `DIST_FILES` default value.
    * The build system may append values to this variable.
* **Required:** No.
* **Default value:** Varies according to [`HOST`](#host), [`PROJ_TYPE`](#proj_type), and [`DIST_DIRS`](#dist_dirs):
    * Generated artifacts (executables or libraries) are added to the default value. The filename of such artifact varies according to [`HOST`](#host) and [`PROJ_TYPE`](#proj_type) (see [`ARTIFACT`](#artifact). For example, executables in windows platforms have the `.exe` suffix; shared libraries in linux have the `.so` suffix, while in windows it is `.dll`).
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### INCLUDE_DIRS

* **Description:** Contains list of directories to be added to compiler's include search path:
    * All directories entries defined in [`SRC_DIRS`](#src_dirs) are automatically added to this variable.
    * If there are any library defined in [`LIBS`](#libs) being built, the directory <tt style="color:#E74C3C">$([O_LIBS_DIR](#o_libs_dir))/dist/include</tt> will be automatically added to this variable.
* **Required:** No.
* **Default value:** If [`PROJ_TYPE`](#proj_type) is `lib` and <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/include</tt> directory exists, the default value is `include`. Otherwise, the variable is left undefined.
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### SKIPPED_SRC_DIRS

* **Description:** This variable constains a list of directories that shall be skipped while looking for source files (see [SRC_DIRS](#src_dirs)).
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### SKIPPED_SRC_FILES

* **Description:** This variable constains a list of source files that shall be skipped while looking for source files (see [SRC_DIRS](#src_dirs)).
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### SRC_DIRS

* **Description:** Contains list of directories containing source files to be compiled. If you want to specify individual files, use [`SRC_FILES`](#src_files) instead:
    * Source files inside any specified directory are searched recursively. If you want to skip certain directories and/or files, add entries to [SKIPPED_SRC_DIRS](#skipped_src_dirs) and/or [SKIPPED_SRC_FILES](#skipped_src_files).
    * If your project defines an entry in both `SRC_DIRS` and in [`SKIPPED_SRC_DIRS`](#skipped_src_dirs), an error will be raised.
    * The build system may append values to this variable if there are [platform layers](../user-guide/#multiplatform-projects) being used during build.
* **Required:** No.
* **Default value:** If <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/src</tt> directory exists, the default value is `src`. Otherwise, the variable is left undefined.
* **Origins:** Makefile.
* **Restrictions:**
    * A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.
    * Directories must be located inside [`$(CURDIR)`](https://www.gnu.org/software/make/manual/make.html#index-CURDIR). If this condition is not met, an error will be raised by the build system.

--------------------------------------------------------------------------------

### SRC_FILES

* **Description:** Contains list of files to be compiled:
    * If your project defines an entry in both `SRC_FILES` and in [`SKIPPED_SRC_FILES`](#skipped_src_files), an error will be raised.
    * The build system may append values to this variable if:
        * There are source files in [platform layers](../user-guide/#multiplatform-projects) being used during build.
        * There are source files in any directory defined in [`SRC_DIRS`](#src_dirs).
* **Required:** No.
* **Default value:** If <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/src</tt> directory exists, for every [source file](../user-guide/#proj_rootsrc) contained (recursively) in this directory, there will be an entry in this variable. If either <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/src</tt> does not exists, or there are no source files found, the variable is left undefined.
* **Origins:** Makefile.
* **Restrictions:**
    * A list is composed by values delimited by whitespaces (this is a GNU make restriction). For this reason, paths containing spaces are not supported.
    * Files must be located inside [`$(CURDIR)`](https://www.gnu.org/software/make/manual/make.html#index-CURDIR). If this condition is not met, an error will be raised by the build system.

--------------------------------------------------------------------------------

## Build system configuration

The following variables configures the build system or show informations about it.

### ARTIFACT

* **Description:** Defines the actual filename for target artifact.
* **Required:** No.
* **Default value:** Varies according to [`HOST`](#host), [`PROJ_NAME`](#proj_name), [`PROJ_TYPE`](#proj_type), [`LIB_TYPE`](#lib_type) (for libraries):
    * If there is no default support for [`HOST`](#host), the default artifact name is `a.out`.
    * Executables files in Linux/mac OS are named <tt style="color:#E74C3C">$([PROJ_NAME]())</tt>
    * Executables files in Windows are named <tt style="color:#E74C3C">$([PROJ_NAME]()).exe</tt>
    * Static libraries are named <tt style="color:#E74C3C">lib$([LIB_NAME](#lib_name)).a</tt> in either Linux, Windows, or mac OS.
    * Shared libraries files in Linux are named <tt style="color:#E74C3C">lib$([LIB_NAME](#lib_name)).so</tt>
	* Shared libraries files in mac OS are named <tt style="color:#E74C3C">lib$([LIB_NAME](#lib_name)).dylib</tt>
	* Shared libraries files in Windows are named <tt style="color:#E74C3C">$([LIB_NAME](#lib_name)).dll</tt>
* **Origins:** Makefile.
* **Restrictions:**
    * Value shall not contain whitespaces nor can be an empty string.
    * Value must contain a only filename. It cannot have any path components.

--------------------------------------------------------------------------------

### BUILD_DEPS

* **Description:** Defines build targets on which the build process depends upon.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([O_BUILD_DIR](#o_build_dir))/$([ARTIFACT](#artifact))</tt>.
* **Origins:** Makefile.
* **Restrictions:** The build system will append value(s) to this variable.

--------------------------------------------------------------------------------

### BUILD_SUBDIR

* **Description:** Sets the path of a subdirectory inside <tt style="color:#E74C3C">$([O](#o))/build</tt> used to hold built artifacts:
    * Changing this value is useful to isolate build directories when building dependencies (e.g. libraries) using the same output directory of the project:
        * This variable is used when dependencies declared in [`LIBS`](#libs) are built.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Any.
* **Restrictions:**
    * When defined, value shall not contain whitespaces.
    * Since this directory will be created inside <tt style="color:#E74C3C">$([O](#o))/build</tt> directory, passing relative paths resulting in a directory outside `$(O)/build` is not allowed (an error will be raised by the build system).

--------------------------------------------------------------------------------

### CPB_DIR

* **Description:** This variable holds the absolute path of the directory where the build system is located.
* **Required:** No.
* **Default value:** This value will never be left empty and it will hold the absolute path of the directory where the build system is located.
* **Origins:** The variable can be defined anywhere, but it will always be overriden by the build system.
* **Restrictions:** The variable will overriden by the build system.

--------------------------------------------------------------------------------

### CPB_MIN_VERSION

* **Description:** Ensures the the build system used is compatible with project expected one:
    * This is useful when sharing the same build system with multiple projects.
    * If build system version used in the project is NOT compatible (using semantic version) with the minimum required one, an error will be raised.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:**
    * When defined, the value shall not be empty nor contain whitespaces.
    * When defined, this variable must hold a valid semantic version (see [fn_semver](../functions.mk/#fn_semver)).

--------------------------------------------------------------------------------

### CPB_VERSION

* **Description:** This read-only variable holds the version of the build system.
* **Required:** No.
* **Default value:** The version of the build system.
* **Origins:** Not applicable (variable is set by the build system).
* **Restrictions:** This is a read-only reserved variable.

--------------------------------------------------------------------------------

### DEBUG

* **Description:** Enables/Disables the debug mode for the build. By default (this behavior can be customized):
    * While bulding in debug mode, debug symbols will be added to generated binary artifact.
    * In release mode (i.e. debug mode is disabled), debugging symbols are not included in generated binary, and artifact is [stripped](#strip_release).
* **Required:** No.
* **Default value:** `0` (i.e. release mode).
* **Origins:** The variable can be declared through any origin, although it is strongly recommended to define this variable through command-line parameters.
* **Restrictions:** Accepted values are:
    * `1` (enable debug mode);
    * `0` (disables debug mode / enables release mode).

--------------------------------------------------------------------------------

### DIST_MARKER

* **Description:** Creates a marker file (empty file) which will touched every time the any of the the [distribution files](../user-guide/#dist) were changed. This is useful to create dependencies on sub-make.
* **Required:** No.
* **Default value:**: Undefined.
* **Origins:** Any.
* **Restrictions:**
    * Value shall not have whitespaces.
    * The value contains a path relative to [`$(O)`](#o) directory. Passing relative paths resulting in a directory outside [`$(O)`](#o) is not allowed (an error will be raised by the build system).

--------------------------------------------------------------------------------

### DIST_SUBDIR

* **Description:** Sets the path of a subdirectory inside  <tt style="color:#E74C3C">$([O](#o))/dist</tt> used to hold distribution artifacts.
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Any.
* **Restrictions:**
    * Value shall not contain whitespaces.
    * Since this directory will be created inside <tt style="color:#E74C3C">$([O](#o))/dist</tt> directory, passing relative paths resulting in a directory outside `$(O)/dist` is not allowed (an error will be raised by the build system).

--------------------------------------------------------------------------------

### HOST

* **Description:** Sets the target host for compilation (see [multiplatform projects](../user-guide/#multiplatform-projects)).
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([NATIVE_HOST](../native.mk/#native_host))</tt> or value is left undefined if native host was not detected.
* **Origins:** Any, although it is strongly recommended to define this variable through command-line parameters.
* **Restrictions:**
    * The value should hold a single word.
    * Dashes are used to [factorize host](../functions.mk/#fn_host_factorize) and identify compatible [platform layers](../user-guide/#multiplatform-projects).
    * Value cannot be empty.

--------------------------------------------------------------------------------

### HOSTS_DIRS

* **Description:** Defines a list of directories where [platform layers](../user-guide/#layer-directories-and-files) are searched while building [multiplatorm projects](../user-guide/#multiplatform-projects):
* **Required:** No.
* **Default value:**
    * If the directory <tt style="color:#E74C3C">$([CURDIR](https://www.gnu.org/software/make/manual/make.html#index-CURDIR))/hosts</tt> is present, it will be automatically added to this variable.
    * The directory  <tt style="color:#E74C3C">$([CPB_DIR](#cpb_dir))/hosts</tt> will be automatically added to this variable.
* **Origins:** Makefile.
* **Restrictions:**
    * Since value is a list of paths, paths shall not contain whitespaces.
    * As stated above, the build system will append values to this variable.

--------------------------------------------------------------------------------

### LIB_NAME

* **Description:** Sets the base name for libraries.
* **Required:** No.
* **Default value:** If [`PROJ_TYPE`](#proj_type) does NOT equal to `lib`, the default value will be undefined. Otherwise:
    * If [PROJ_VERSION](#proj_version) is defined, the default value is <tt style="color:#E74C3C">$([PROJ_NAME](#proj_name))$(call [fn_semver_major](../functions.mk/#fn_semver_major),[PROJ_VERSION](#proj_version))</tt>.
    * If [PROJ_VERSION](#proj_version) is not defined, the default value is  <tt style="color:#E74C3C">$([PROJ_NAME](#proj_name))</tt>.
* **Origins:** Makefile.
* **Restrictions:** When defined, value cannot be empty nor contains whitespaces.

--------------------------------------------------------------------------------

### LIB_TYPE

* **Description:** For library projects (i.e. when [`PROJ_TYPE`](#proj_type) equals to `lib`), the variable defines the type of generated library.
* **Required:** No.
* **Default value:** Depends on [`HOST`](#host). Usually, on systems supporting shared libraries, the default value will be `shared`.
* **Origins:** Any, although it is strongly recommended to define this variable through command-line parameters.
* **Restrictions:** Accepted values are:
    * `static` (for a **static** library);
    * `shared` (for a **shared** library).

--------------------------------------------------------------------------------

### O

* **Description:** Sets the [output directory](../user-guide/#output-directories), where all generated artifacts during build, will be placed into.
* **Required:** No.
* **Default value:**
    * For a [debug](#debug) build, the default value is: <tt style="color:#E74C3C">$([O_BASE](#o_base))/$([HOST](#host))/debug</tt>.
    * For a [release](#debug) build, the default value is: <tt style="color:#E74C3C">$([O_BASE](#o_base))/$([HOST](#host))/release</tt>.
* **Origins:** Any, although it is strongly recommended to define this variable through command-line parameters.
* **Restrictions:**
    * Value shall not contain whitespaces nor can be an empty string.
	* Value shall not be equal to [`CURDIR`](https://www.gnu.org/software/make/manual/make.html#index-CURDIR).

--------------------------------------------------------------------------------

### O_BASE

* **Description:** Defines the base [output directory](../user-guide/#output-directories).
* **Required:** Not applicable (variable is set by the build system).
* **Default value:** If [`O`](#o) variable is defined, the value of this variable will be the same as [`O`](#o). Otherwise, the default value will be `output`.
* **Origins:** Not applicable (variable is set by the build system).
* **Restrictions:** This is a read-only reserved variable.

--------------------------------------------------------------------------------

### O_BUILD_DIR

* **Description:** Contains the path where compiled files are placed.
* **Required:** Not applicable (variable is set by the build system).
* **Default value:** <tt style="color:#E74C3C">$([O](#o))/build/$([BUILD_SUBDIR](#build_subdir))</tt>
* **Origins:** Not applicable (variable is set by the build system).
* **Restrictions:** This is a read-only reserved variable.

--------------------------------------------------------------------------------

### O_DIST_DIR

* **Description:** Contains the path where distribution files (e.g. artifact, library companion headers, etc) are placed.
* **Required:** Not applicable (variable is set by the build system).
* **Default value:** <tt style="color:#E74C3C">$([O](#o))/dist/$([DIST_SUBDIR](#dist_subdir))</tt>
* **Origins:** Not applicable (variable is set by the build system).
* **Restrictions:** This is a read-only reserved variable.

--------------------------------------------------------------------------------

### POST_BUILD_DEPS

* **Description:** Contains a list of targets to be executed AFTER the [`build`](../user-guide/#build) target execution.
* **Required:** No.
* **Default value:** Depends on select [`HOST`](#host) and [`PROJ_TYPE`](#proj_type).
* **Origins:** Makefile.
* **Restrictions:** The build system can append values to this variable.

--------------------------------------------------------------------------------

### POST_CLEAN_ALL_DEPS

* **Description:** Contains a list of targets to be executed AFTER the [`clean-all`](../user-guide/#clean_all) target execution.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** None.

--------------------------------------------------------------------------------

### POST_CLEAN_DEPS

* **Description:** Contains a list of targets to be executed AFTER [`clean`](../user-guide/#clean) target execution.
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### POST_DIST_DEPS

* **Description:** Contains a list of targets to be executed AFTER [`dist`](#dist) target execution.
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### POST_EVAL

* **Description:** Contains makefile constructs which shall be evaluated (using [`eval`](https://www.gnu.org/software/make/manual/make.html#Eval-Function) function) when all [platform layers](../user-guides/#multiplatform-projects) where already parsed:
    * This is useful to add build system customizations (e.g. adding custom targets) depending on selected [`HOST`](#host).
    * Evaluation of the contents of this variable is performed AFTER [`POST_INCLUDES`](#post_includes).
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### POST_INCLUDES

* **Description:** Contains a list of makefiles that should be included by the build system after [platform layers](../user-guides/#multiplatform-projects) were parsed. This is useful to define targets depending on variables which are defined only after all platform layers were processed.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### PRE_BUILD_DEPS

* **Description:** Contains a list of targets to be executed BEFORE the internal rules of the [`build`](#build) target. This is usefull to build dependencies before building the target artifact itself.
  * See [make targets](#make-targets)
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:** Since variable is intended to hold a list of values (whitespace-delimited string), it is recommend to use the `+=` operator while adding values to the variable.

--------------------------------------------------------------------------------

### PRE_CLEAN_ALL_DEPS

* **Description:** Contains a list of targets to be executed BEFORE the [`clean-all`](../user-guide/#clean_all) target execution.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** None.

--------------------------------------------------------------------------------

### PRE_CLEAN_DEPS

* **Description:** Contains a list of targets to be executed BEFORE [`clean`](../user-guide/#clean) target execution.
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### PRE_DIST_DEPS

* **Description:** Contains a list of targets to be executed BEFORE [`dist`](#dist) target execution.
* **Required:** No.
* **Default value:**  Undefined.
* **Origins:** Makefile.
* **Restrictions:**  None.

--------------------------------------------------------------------------------

### RELEASE_OPTIMIZATION_LEVEL

* **Description:**  Defines the optimization level that shall be applied for release artifacts (when [`DEBUG`](#debug) is `0`).
* **Required:** No.
* **Default value:** if [`DEBUG`](#debug) is `1`, variable is left undefined. If release mode is set (i.e. [`DEBUG`](#debug) is `0`), default value is `2` (optimize even more).
* **Origins:** Makefile.
* **Restrictions:** Accepted values are any of the following (check [GCC documentation](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html) for details):
    * `0` (no optimization);
    * `1` (optmize);
    * `2` (optimize even more);
    * `3` (optimize yet more);
    * `s` (optimizes for size);
    * `fast` (disregard strict standards compliance);
    * `g` (optimize debugging experience);
    * `z` (optimize aggressively for size rather than speed).

--------------------------------------------------------------------------------

### STRIP_RELEASE

* **Description:**  Defines if release artifacts (i.e. when [`DEBUG`](#debug) is `0`) shall be stripped.
* **Required:** No.
* **Default value:** if [`DEBUG`](#debug) is `1`, variable is left undefined. If release mode is set (i.e. [`DEBUG`](#debug) is `0`), default value is `1` (strips release artifacts).
* **Origins:** Makefile.
* **Restrictions:**  Accepted values are `0` (do NOT strip release artifacts) and `1` (strip release artifacts).

--------------------------------------------------------------------------------

### V

* **Description:** Enables/Disables the verbose mode.
    * When enabled, each compiler command executed by the build system will be displayed in standard output during `make` command invocation.
* **Required:** No.
* **Default value:** `0` (non-verbose mode).
* **Origins:** Any, although it is strongly recommended to define this variable through command-line parameters.
* **Restrictions:** Accepted values are `1` (enables verbose mode) or `0` (disables verbose mode).

--------------------------------------------------------------------------------

### VARS

* **Description:** Contains a list of variable names to inspec through [`print-vars`](../user-guide/#print-vars) target.
    * For example, to get the values of [`SRC_DIRS`](#src_dirs) and [`SRC_FILES`](#src_files) variables just call make like this:
        <pre><code class="language-sh hljs">make print-vars VARS='SRC_DIRS SRC_FILES'</code></pre>

* **Required:** No.
* **Default value:** A predefined list of variable names which varies according to included makefiles.
* **Origins:** Any, although it is strongly recommended to define this variable through command line parameters.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### V_PREFIX

* **Description:** Contains a prefix that can be placed before receipt commands in order to suppress/show the command being executed according to the value defined in [`V`](#v).
    * Here is an example used to hide/show the invoked compiler command while bulding a C file:
        <pre><code class="language-makefile hljs">$(V_PREFIX)$(CROSS_COMPILE)$(CC) $(strip $(CFLAGS) -c $< -o $@)</code></pre>

* **Required:** Not applicable (variable is set by the build system).
* **Default value:** Depends on the value of [`V`](#v):
    *  If verbose mode is enabled, this variable will be empty. Otherwise value will be `@` (tells make to suppress command echoing).

* **Origins:** Not applicable (variable is set by the build system).
* **Restrictions:** This is a read-only reserved variable.

--------------------------------------------------------------------------------

## Compiler management

The following variables configures the compiler.

Modifying default values are generally used for cross-compilation. For native builds, default values are usually enough.

### AR

* **Description:** Contains the name of archiver executable.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))ar</tt>.
* **Origins:** Any.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### ARFLAGS

* **Description:** Additional flags to be passed to the archiver.
* **Required:** No.
* **Default value:** The build system will append appropriate values to this variable.
* **Origins:** Any.
* **Restrictions:** The build system will append appropriate values to this variable.

--------------------------------------------------------------------------------

### AS

* **Description:** Contains the name of assembler executable.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))as</tt>.
* **Origins:** Any.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### ASFLAGS

* **Description:** Additional flags to be passed to the assembler.
* **Required:** No.
* **Default value:** The build system will append appropriate values to this variable.
* **Origins:** Any.
* **Restrictions:** The build system will append appropriate values to this variable.

--------------------------------------------------------------------------------

### CC

* **Description:** Contains the name of C compiler executable.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))gcc</tt>.
* **Origins:** Any.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### CFLAGS

* **Description:** Additional flags to be passed to the C compiler.
* **Required:** No.
* **Default value:** The build system will append appropriate values to this variable.
* **Origins:** Any.
* **Restrictions:** The build system will append appropriate values to this variable.

--------------------------------------------------------------------------------

### CROSS_COMPILE

* **Description:** Contains the prefix to be added to toolchain executables.
* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Any.
* **Restrictions:** None.

--------------------------------------------------------------------------------

### CXX

* **Description:** Contains the name of C++ compiler executable.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))g++</tt>.
* **Origins:** Any.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### CXXFLAGS

* **Description:** Flags to be passed to the C++ compiler.
* **Required:** No.
* **Default value:** The build system will append appropriate values to this variable.
* **Origins:** Any.
* **Restrictions:** The build system will append appropriate values to this variable.

--------------------------------------------------------------------------------

### LD

* **Description:** Contains the name of linker executable.
* **Required:** No.
* **Default value:**
    * <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))gcc</tt> (for pure C or Assembly projects).
    * <tt style="color:#E74C3C">$([CROSS_COMPILE](#cross_compile))g++</tt> (for projects containing C++ sources).
* **Origins:** Any.
* **Restrictions:** Value cannot be empty.

--------------------------------------------------------------------------------

### LDFLAGS

* **Description:** Flags to be passed to the linker.
* **Required:** No.
* **Default value:** The build system will append appropriate values to this variable.
* **Origins:** Any.
* **Restrictions:** The build system will append appropriate values to this variable.

--------------------------------------------------------------------------------

## Dependency management

The build system can automatically manage direct and transient dependencies.

Use the following variables in order to establish dependencies on external libraries.

### LIBS

* **Description:** Contains a list of library entries upon which the project depends on:
    * Each entry in this variable has the syntax `LIB_NAME[:LIB_PROJECT_DIR[:LIB_PROJECT_MAKEFILE]]`:
        * `LIB_NAME`: defines the library name used by linker.
        * `LIB_PROJECT_DIR`: When defined, the library will be compiled along with the project. This component contains the path to the directory where the library project is located (is assumed that library project is built using cpp-project-builder):
            * By defining this entry, the variable <tt style="color:#E74C3C">[LIB_MKDIR](#lib_mkdir_lib_name)_&lt;LIB_NAME></tt> will be automatically defined.
        * `LIB_PROJECT_MAKEFILE`: When defined, this component refers to the makefile which will be used to build the project (is assumed that library project is built using cpp-project-builder):
            * By defining this entry, the variable <tt style="color:#E74C3C">[LIB_MAKEFILE](#lib_makefile_lib_name)_&lt;LIB_NAME></tt> will be automatically defined.
    * If you want to pass custom flags to the make invokation while building a library, define the variable <tt style="color:#E74C3C">[LIB_MKFLAGS](#lib_mkflags_lib_name)_&lt;LIB_NAME></tt> with the flags to be passed.
    * If a library being built also depends on another libraries, the transient dependencies will also be built.
    * The build system will pass the correct flags to the compiler and linker in order to use all declared libraries and their dependencies:
        * For example, If a project depends on library `X`, and library `X` depends on library `Y`, which in turn depends on library `Z`, and all of them are using cpp-project-builder to manage their building process, then the main project is required to only declare dependency on `X` (the other transient dependencies are managed automatically by the build system).
    * Examples:
        * To declare a dependency on library `X` located in directory `lib`, declare an entry like this:
            <pre><code class="language-makefile hljs">LIBS += X:lib</code></pre>

            If a makefile file is named different from the [default names](https://www.gnu.org/software/make/manual/make.html#Makefile-Names) (for example: `libx.mk`), it can be declared like this:

            <pre><code class="language-makefile hljs">LIBS += X:lib:libx.mk</code></pre>

    * If the libraries are already present in the system, then you can pass just the `LIB_NAME`:
        * By using system-wide libraries, the build system cannot guess their transient dependencies. So you are required to declare them explicitly.
        * For example, let's assume your project has a dependency on [libm](https://www.gnu.org/software/libc/manual/html_node/Mathematics.html). In order to declare the dependency on it, just add the following entry in your makefile:
            <pre><code class="language-makefile hljs">LIBS += m</code></pre>

            !!! info "LIBS vs LDFLAGS for system libraries"
                When it comes to system libraries in [application](#proj_type) projects, declaring dependencies could be perfectly done by using the variable [`LDFLAGS`](#ldflags).

                BUT, for libraries, it is strongly recommend to use the `LIBS` variable because it allows the build system to guess the transient dependencies.

* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** A list is composed by values delimited by whitespaces (this is a GNU make restriction). Due to this reason, paths containing spaces are not supported.

--------------------------------------------------------------------------------

### LIB_MAKEFILE<i>_&lt;lib_name></i>

* **Description:** This variable holds the name of a makefile used to build a library named `LIB_NAME` declared in [`LIBS`](#libs) variable:
    * For each `LIB_NAME`, the build system will check the existence of a variable named `LIB_MAKEFILE_<LIB_NAME>`.
    * For each library entry defined in [`LIBS`](#libs), if the component `LIB_PROJECT_MAKEFILE` is not informed and there is still a need to use a custom makefile to build the dependency, then this variable can be used.
    * If the component `LIB_PROJECT_MAKEFILE` is defined in library entry, then this variable is automatically defined.

        !!! warning
            Defining this variable explicitly along with its implicit definition (through [`LIBS`](#libs) variable), will result in an error being raised by the build system.

* **Required:** No.
* **Default value:** If component `LIB_PROJECT_MAKEFILE` is defined in library entry  (through [`LIBS`](#libs) variable), this variable will be defined automatically. Otherwise, this variable is not defined.
* **Origins:** Makefile.
* **Restrictions:** Defining this variable explicitly along with its implicit definition (through [`LIBS`](#libs) variable), will result in an error being raised by the build system.

--------------------------------------------------------------------------------

### LIB_MKDIR<i>_&lt;lib_name></i>

* **Description:** This variable holds the path of a directory containing the project used to build a library named `LIB_NAME` declared in [`LIBS`](#libs) variable:
    * For each `LIB_NAME`, the build system will check the existence of a variable named `LIB_MKDIR_<LIB_NAME>`.
    * For each library entry defined in [`LIBS`](#libs), if the component `LIB_PROJECT_DIR` is not informed and there is still a need to define the directory where its project is located, then this variable can be used.
    * If the component `LIB_PROJECT_DIR` is defined in library entry, then this variable is automatically defined.

        !!! warning
            Defining this variable explicitly along with its implicit definition (through [`LIBS`](#libs) variable), will result in an error being raised by the build system.

* **Required:** No.
* **Default value:** If component `LIB_PROJECT_DIR` is defined in library entry  (through [`LIBS`](#libs) variable), this variable will be defined automatically. Otherwise, this variable is not defined.
* **Origins:** Makefile.
* **Restrictions:** Defining this variable explicitly along with its implicit definition (through [`LIBS`](#libs) variable), will result in an error being raised by the build system.

--------------------------------------------------------------------------------

### LIB_MKFLAGS<i>_&lt;lib_name></i>

* **Description:** This variable holds additional flags to be passed to the `make` invocation while building a library named `LIB_NAME` declared in [`LIBS`](#libs) variable:
    * For each `LIB_NAME`, the build system will check the existence of a variable named `LIB_MKFLAGS_<LIB_NAME>`.
    * Let's suppose you are building a project which depends on library `B`. Then in project's makefile there would be an entry like this:

        <pre><code class="language-makefile hljs">LIBS += B:lib_b_dir</code></pre>

        While building the project, you are specifying the `HOST=proj-host` for the build via command-line. Then a build command would be something like this:

        <pre><code class="language-shell hljs">make HOST=proj-host</code></pre>

        But, the equivalent host in `B`'s project is named `custom-host`.

        While building the `B` dependency, the build system will invoke a sub-make by calling the following command (note: the real command is a bit more complex than this. If you want to check the real commands during builds, use the [`V`](#v) variable):

        <pre><code class="language-shell hljs">make -C lib_b_dir</code></pre>

        Since we passed the `HOST=proj-host` via command line, it will be [passed down to the sub-make behind the scenes](https://www.gnu.org/software/make/manual/make.html#Variables_002fRecursion).

        This will cause problems, because as stated before, the equivalent host in `B` is named `custom-host` (if `HOST` would not be informed via command-line, but instead via a makefile variable, then the scenario would be even worse, because there would be no such variable being passed to the sub-make at all).

        In order to solve such problem, it would be required to specify the equivalent host while invoking the sub-make.

		In order to do so, define the variable `LIB_MKFLAGS_B` when building for host `proj-host`:

        <pre><code class="language-makefile hljs">ifeq ($(HOST),proj-host)
    # Instead of using ifeq, this declaration could be done in
    # a `hosts.mk` inside a layer
    LIB_MKFLAGS_B += HOST=custom-host
endif
        </code></pre>

        By specifying the variable, when build system needs to build the library `B` for host `proj-host`, it will invoke a sub-make like this (again: this is a simplified command):

        <pre><code class="language-shell hljs">make -C lib_b_dir HOST=custom-host</code></pre>

* **Required:** No.
* **Default value:** Undefined.
* **Origins:** Makefile.
* **Restrictions:** The build system will append some values to the variable.

--------------------------------------------------------------------------------

### O_LIBS_DIR

* **Description:** Contains the absolute path used as output directory for libraries (declared using [`LIBS`](#libs) variable) being built by the build system.
* **Required:** No.
* **Default value:** <tt style="color:#E74C3C">$([abspath](https://www.gnu.org/software/make/manual/make.html#index-abspath-1) $([O](#o))/libs)</tt>
* **Origins:** Any.
* **Restrictions:**
    * The value shall not be empty, nor it can have whitespaces.
